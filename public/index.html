<html>
<head>
	<script src='https://cdn.firebase.com/js/client/2.0.4/firebase.js'></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.0/handlebars.min.js"></script>
	<script src="./javascripts/templates.js"></script>

	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css", rel="stylesheet">
</head>
<body>
	<script>
	function getFbData(token) {
		var url = 'https://graph.facebook.com/v2.2/me/groups?';
		url += token;
		$.ajax({
			url: url,
			dataType: 'jsonp',
			success: function(response) {
				//display selector with handlebars
				console.dir(response);
			}
		});

	}

	var ref = new Firebase("https://hackenstance.firebaseio.com");
	ref.authWithOAuthPopup("facebook", function(error, authData) {
		if (error) {
			console.log("Login Failed!", error);
		} else {
			console.log("Authenticated successfully with payload:", authData);
			var id = authData.facebook.id;
			var usersRef = ref.child("users/" + id);
			usersRef.set(authData);
			console.log('yoken: ' + authData.facebook.accessToken);
			getFbData(authData.facebook.accessToken);
		}
	}, {
		scope: "email, user_about_me, user_groups, user_likes"
	});

	</script>
	<div id="group-selector-container"></div>
</body>
</html>